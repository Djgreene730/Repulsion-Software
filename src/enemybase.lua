----------------------------------------------------------
-- enemybase.lua
-- Contains table of values that represent the enemy's base.
----------------------------------------------------------
local Materials = require("materials")
local Units = require("units")
W = display.contentWidth
H = display.contentHeight

EnemyBase = {}

EnemyBase.level1 = {
	numObjects=17,
	baseX=700,
	baseY=291.62228393555,
	totalCost=2350,
	id={
		2,2,2,5,5,2,2,2,2,1,1,2,5,5,2,2,5
	},
	x_vals={
		36.520095825195,73.500701904297,110.08236694336,52.264709472656,90.83235168457,0,147.07106018066,11.66431427002,131.92050170898,43.546508789063,103.82730102539,76.031707763672,118.96987915039,34.672973632813,49.465393066406,106.09231567383,75.977630615234
	},
	y_vals={
		-0.037445068359375,-0.014495849609375,0,-36.429992675781,-36.396118164063,-0.072174072265625,-0.05572509765625,-36.556732177734,-36.470901489258,-58.310424804688,-58.191467285156,-80.073638916016,-80.006622314453,-80.220077514648,-116.56265258789,-116.4342956543,-152.88818359375
	},
	rotations={
		0.03193973377347,0.013448665849864,-0.013245727866888,360.01559448242,-0.010653432458639,-179.99993896484,-0.044720381498337,0.3080041706562,-0.50056475400925,0.29169163107872,0.038624338805676,0.088991388678551,0.37070873379707,0.23231199383736,0.28136557340622,0.049281530082226,0.10789451003075
	}
}

EnemyBase.level2 = {
	numObjects=25,
	baseX=700,
	baseY=302.5466003418,
	totalCost=2525,
	id={
	3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,3,2,4,4,4,4,2
	},
	x_vals={
	0,25.952362060547,40.407623291016,54.86833190918,142.01098632813,116.03897094727,101.56758117676,87.084564208984,40.091125488281,102.02961730957,38.521606445313,102.37808227539,37.191940307617,100.79486083984,46.640655517578,87.908187866211,46.296585083008,84.56005859375,61.880935668945,59.361068725586,58.121429443359,38.538650512695,76.011093139648,55.871765136719,58.364227294922
	},
	y_vals={
	-0.023101806640625,-11.481658935547,-11.478302001953,-11.480865478516,0,-11.500396728516,-11.498748779297,-11.478240966797,-37.387756347656,-37.602020263672,-51.543563842773,-51.986053466797,-65.709823608398,-66.286911010742,-91.41877746582,-91.708099365234,-128.68350219727,-128.98101806641,-154.48873901367,-180.12465667725,-201.7624130249,-207.72159576416,-208.4044342041,-214.44390869141,-236.35068511963
	},
	scaleX={
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
	},
	scaleY={
	1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1
	},
	rotations={
	0.014953908510506,90.015365600586,89.983154296875,89.94645690918,-0.010513520799577,89.971488952637,89.982246398926,89.905197143555,0.0032201225403696,-1.0057270526886,0.10626636445522,-1.4990472793579,0.3043067753315,-1.8881067037582,0.40165439248085,-2.2379004955292,0.29689040780067,-2.299280166626,-0.43100771307945,-0.75919276475906,-0.9195573925972,-1081.1995849609,-0.89414042234421,-1.0600609779358,-1.0490657091141
	}
}

EnemyBase.level3 = {
	numObjects=17,
	baseX=700,
	baseY=291.56558227539,
	totalCost=2350,
	id={
		2,2,2,2,2,2,3,3,3,3,3,3,2,2,2,1,5
	},
	x_vals={
		25.744094848633,62.194900512695,61.934921264648,100.12005615234,98.740005493164,99.587295532227,0,36.11457824707,73.986343383789,10.072425842285,48.453842163086,86.32861328125,167.90472412109,167.97546386719,167.98181152344,133.75653076172,133.21572875977
	},
	y_vals={
		-0.017059326171875,-0.015289306640625,-36.468078613281,0,-36.419845581055,-72.83821105957,-0.08209228515625,-36.472106933594,-72.93244934082,-25.590484619141,-61.923980712891,-98.339950561523,-0.001922607421875,-36.42350769043,-72.848937988281,-94.701812744141,-116.62097167969
	},
	rotations={
		0.0041798599995673,0.0010478022741154,0.013759597204626,0.032219666987658,0.10858691483736,0.17690715193748,89.890983581543,89.991302490234,90.169403076172,0.39098832011223,0.02256708778441,0.23574095964432,-0.028780627995729,-0.094077095389366,-0.15388461947441,-0.026391414925456,-0.025633389130235
	}
}

EnemyBase.level4 = {
	numObjects=17,
	baseX=700,
	baseY=291.55462646484,
	totalCost=1500,
	id={
		3,3,5,4,4,5,5,2,2,2,4,4,4,4,5,2,5
	},
	x_vals={
		0,50.949447631836,25.597579956055,6.5508422851563,43.791488647461,7.2765045166016,44.263137817383,112.36805725098,149.30955505371,112.23382568359,112.68566894531,110.69309997559,111.67994689941,110.68556213379,111.72560119629,185.79795837402,185.74739074707
	},
	y_vals={
		-0.005279541015625,-0.026519775390625,-0.004547119140625,-21.480346679688,-21.499450683594,-42.931106567383,-42.947662353516,-0.00341796875,-0.01806640625,-36.451049804688,-57.897979736328,-64.344848632813,-70.792175292969,-77.240371704102,-98.689224243164,0,-36.440383911133
	},
	rotations={
		89.995758056641,90.180068969727,179.86805725098,-0.071522891521454,0.18127182126045,-0.071598760783672,0.1814052015543,-7.09967862349e-005,-0.038013778626919,-0.00027630850672722,-0.00037418896681629,-0.00025578821077943,0.00029409924172796,0.00053497846238315,0.00048954144585878,0.00014842602831777,0.00079830962931737
	}
}

EnemyBase.loadBase = function(level)
	local physics = require("physics")
	local enemyGroup = display.newGroup()
	for i=1,level.numObjects do
		local obj = {}
		local enemyCollisionFilter = { categoryBits = 4, maskBits = 5 }
		if level.id[i] < 1000 then
			obj = Materials.clone(level.id[i])
			obj.x = level.baseX + level.x_vals[i]
			obj.y = level.baseY + level.y_vals[i]
			obj.rotation = level.rotations[i]
			obj:addEventListener("postCollision",hit);
			physics.addBody(obj, "dynamic", { friction=obj.friction, bounce=obj.bounce, density=obj.density, shape=obj.shape, filter=enemyCollisionFilter })
		elseif level.id[i] >= 1000 then
			obj = Units.clone(level.id[i])
			obj.x = level.baseX + level.x_vals[i];
			obj.y = level.baseY + level.y_vals[i];
			obj.rotation = level.rotations[i]
			obj:addEventListener("postCollision",hit);
			physics.addBody( obj, "dynamic",
				{ density=obj.objDensity, friction=obj.objFriction, bounce=obj.objBounce, shape=obj.objShape, filter=enemyCollisionFilter },
				{ density=obj.objBaseDensity, friction=obj.objBaseFriction, bounce=obj.objBaseBounce, shape=obj.objBaseShape, filter=enemyCollisionFilter }
			)
		end
		enemyGroup:insert(obj)
	end
	return enemyGroup
end

return EnemyBase